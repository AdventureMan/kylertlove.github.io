var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var i;if(e)for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}function eachReverse(e,t){var i;if(e)for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,s){return t&&eachProp(t,function(t,n){!i&&hasProp(e,n)||(!s||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,s)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,s){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=s,i&&(n.originalError=i),n}function newContext(e){function t(e,t,i){var s,n,r,o,a,h,l,u,p,c,d=t&&t.split("/"),f=w.map,m=f&&f["*"];if(e&&(h=(e=e.split("/")).length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[h])&&(e[h]=e[h].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&d&&(e=d.slice(0,d.length-1).concat(e)),function(e){var t,i;for(t=0;t<e.length;t++)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),i&&f&&(d||m)){e:for(r=(n=e.split("/")).length;r>0;r-=1){if(a=n.slice(0,r).join("/"),d)for(o=d.length;o>0;o-=1)if((s=getOwn(f,d.slice(0,o).join("/")))&&(s=getOwn(s,a))){l=s,u=r;break e}!p&&m&&getOwn(m,a)&&(p=getOwn(m,a),c=r)}!l&&p&&(l=p,u=c),l&&(n.splice(0,u,l),e=n.join("/"))}return getOwn(w.pkgs,e)||e}function i(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===g.contextName)return t.parentNode.removeChild(t),!0})}function s(e){var t=getOwn(w.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),g.require.undef(e),g.makeRequire(null,{skipMap:!0})([e]),!0}function n(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function r(e,i,s,r){var o,a,h,l,u=null,p=i?i.name:null,c=e,d=!0,f="";return e||(d=!1,e="_@r"+(O+=1)),e=(l=n(e))[1],(u=l[0])&&(u=t(u,p,r),a=getOwn(P,u)),e&&(u?f=s?e:a&&a.normalize?a.normalize(e,function(e){return t(e,p,r)}):-1===e.indexOf("!")?t(e,p,r):e:(u=(l=n(f=t(e,p,r)))[0],s=!0,o=g.nameToUrl(f=l[1]))),{prefix:u,name:f,parentMap:i,unnormalized:!!(h=!u||a||s?"":"_unnormalized"+(_+=1)),url:o,originalName:c,isDefine:d,id:(u?u+"!"+f:f)+h}}function o(e){var t=e.id,i=getOwn(S,t);return i||(i=S[t]=new g.Module(e)),i}function a(e,t,i){var s=e.id,n=getOwn(S,s);!hasProp(P,s)||n&&!n.defineEmitComplete?(n=o(e)).error&&"error"===t?i(n.error):n.on(t,i):"defined"===t&&i(P[s])}function h(e,t){var i=e.requireModules,s=!1;t?t(e):(each(i,function(t){var i=getOwn(S,t);i&&(i.error=e,i.events.error&&(s=!0,i.emit("error",e)))}),s||req.onError(e))}function l(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(g.defQueueMap[t]=!0),T.push(e)}),globalDefQueue=[])}function u(e){delete S[e],delete b[e]}function p(){var e,t,n=1e3*w.waitSeconds,r=n&&g.startTime+n<(new Date).getTime(),o=[],a=[],l=!1,u=!0;if(!y){if(y=!0,eachProp(b,function(e){var n=e.map,h=n.id;if(e.enabled&&(n.isDefine||a.push(e),!e.error))if(!e.inited&&r)s(h)?(t=!0,l=!0):(o.push(h),i(h));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return u=!1}),r&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=g.contextName,h(e);u&&each(a,function(e){!function e(t,i,s){var n=t.map.id;t.error?t.emit("error",t.error):(i[n]=!0,each(t.depMaps,function(n,r){var o=n.id,a=getOwn(S,o);!a||t.depMatched[r]||s[o]||(getOwn(i,o)?(t.defineDep(r,P[o]),t.check()):e(a,i,s))}),s[n]=!0)}(e,{},{})}),r&&!t||!l||!isBrowser&&!isWebWorker||E||(E=setTimeout(function(){E=0,p()},50)),y=!1}}function c(e){hasProp(P,e[0])||o(r(e[0],null,!0)).init(e[1],e[2])}function d(e,t,i,s){e.detachEvent&&!isOpera?s&&e.detachEvent(s,t):e.removeEventListener(i,t,!1)}function f(e){var t=e.currentTarget||e.srcElement;return d(t,g.onScriptLoad,"load","onreadystatechange"),d(t,g.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function m(){var e;for(l();T.length;){if(null===(e=T.shift())[0])return h(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));c(e)}g.defQueueMap={}}var y,v,g,x,E,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},b={},M={},T=[],P={},A={},C={},O=1,_=1;return x={require:function(e){return e.require?e.require:e.require=g.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(v=function(e){this.events=getOwn(M,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,i,s){s=s||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=s.ignore,s.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,g.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();g.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;A[e]||(A[e]=!0,g.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,s=this.depExports,n=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=g.execCb(i,r,s,n)}catch(t){e=t}else n=g.execCb(i,r,s,n);if(this.map.isDefine&&void 0===n&&((t=this.module)?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",h(this.error=e)}else n=r;if(this.exports=n,this.map.isDefine&&!this.ignore&&(P[i]=n,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(g,this.map,o)}u(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(g.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,s=r(e.prefix);this.depMaps.push(s),a(s,"defined",bind(this,function(s){var n,l,p,c=getOwn(C,this.map.id),d=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=g.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(s.normalize&&(d=s.normalize(d,function(e){return t(e,f,!0)})||""),a(l=r(e.prefix+"!"+d,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=l,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((p=getOwn(S,l.id))&&(this.depMaps.push(l),this.events.error&&p.on("error",bind(this,function(e){this.emit("error",e)})),p.enable()))):c?(this.map.url=g.nameToUrl(c),void this.load()):((n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],eachProp(S,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&u(e.map.id)}),h(e)}),n.fromText=bind(this,function(t,s){var a=e.name,l=r(a),u=useInteractive;s&&(t=s),u&&(useInteractive=!1),o(l),hasProp(w.config,i)&&(w.config[a]=w.config[i]);try{req.exec(t)}catch(e){return h(makeError("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}u&&(useInteractive=!0),this.depMaps.push(l),g.completeLoad(a),m([a],n)}),void s.load(e.name,m,n,w))})),g.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){b[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,s,n;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(x,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,a(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?a(e,"error",bind(this,this.errback)):this.events.error&&a(e,"error",bind(this,function(e){this.emit("error",e)}))}s=S[i=e.id],hasProp(x,i)||!s||s.enabled||g.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&g.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(g={config:w,contextName:e,registry:S,defined:P,urlFetched:A,defQueue:T,defQueueMap:{},Module:v,makeModuleMap:r,nextTick:req.nextTick,onError:h,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(-1===i.indexOf("?")?"?":"&")+t}}var i=w.shim,s={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){s[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(C[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=g.makeShimExports(e)),i[t]=e}),w.shim=i),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(w.paths[t]=e.location),w.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t,null,!0))}),(e.deps||e.callback)&&g.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(s,n){function a(t,i,l){var u,c,d;return n.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof t?isFunction(i)?h(makeError("requireargs","Invalid require call"),l):s&&hasProp(x,t)?x[t](S[s.id]):req.get?req.get(g,t,s,a):(c=r(t,s,!1,!0),hasProp(P,u=c.id)?P[u]:h(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(s?"":". Use require([])")))):(m(),g.nextTick(function(){m(),(d=o(r(null,s))).skipMap=n.skipMap,d.init(t,i,l,{enabled:!0}),p()}),a)}return n=n||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),g.nameToUrl(t(e,s&&s.id,!0),i,!0)},defined:function(e){return hasProp(P,r(e,s,!1,!0).id)},specified:function(e){return e=r(e,s,!1,!0).id,hasProp(P,e)||hasProp(S,e)}}),s||(a.undef=function(e){l();var t=r(e,s,!0),n=getOwn(S,e);n.undefed=!0,i(e),delete P[e],delete A[t.url],delete M[e],eachReverse(T,function(t,i){t[0]===e&&T.splice(i,1)}),delete g.defQueueMap[e],n&&(n.events.defined&&(M[e]=n.events),u(e))}),a},enable:function(e){getOwn(S,e.id)&&o(e).enable()},completeLoad:function(e){var t,i,n,r=getOwn(w.shim,e)||{},o=r.exports;for(l();T.length;){if(null===(i=T.shift())[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);c(i)}if(g.defQueueMap={},n=getOwn(S,e),!t&&!hasProp(P,e)&&n&&!n.inited){if(!(!w.enforceDefine||o&&getGlobal(o)))return s(e)?void 0:h(makeError("nodefine","No define call for "+e,null,[e]));c([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,t,i){var s,n,r,o,a,h,l=getOwn(w.pkgs,e);if(l&&(e=l),h=getOwn(C,e))return g.nameToUrl(h,t,i);if(req.jsExtRegExp.test(e))o=e+(t||"");else{for(s=w.paths,r=(n=e.split("/")).length;r>0;r-=1)if(a=getOwn(s,n.slice(0,r).join("/"))){isArray(a)&&(a=a[0]),n.splice(0,r,a);break}o=n.join("/"),o=("/"===(o+=t||(/^data\:|^blob\:|\?/.test(o)||i?"":".js")).charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+o}return w.urlArgs&&!/^blob\:/.test(o)?o+w.urlArgs(e,o):o},load:function(e,t){req.load(g,e,t)},execCb:function(e,t,i,s){return t.apply(s,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=f(e);g.completeLoad(t.id)}},onScriptError:function(e){var t=f(e);if(!s(t.id)){var i=[];return eachProp(S,function(e,s){0!==s.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(s),!0})}),h(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}}).require=g.makeRequire(),g}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,s){var n,r,o=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=i,i=s):e=[]),r&&r.context&&(o=r.context),(n=getOwn(contexts,o))||(n=contexts[o]=req.s.newContext(o)),r&&n.configure(r),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var s=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return s.type=e.scriptType||"text/javascript",s.charset="utf-8",s.async=!0,s},req.load=function(e,t,i){var s,n=e&&e.config||{};if(isBrowser)return(s=req.createNode(n,t,i)).setAttribute("data-requirecontext",e.contextName),s.setAttribute("data-requiremodule",t),!s.attachEvent||s.attachEvent.toString&&s.attachEvent.toString().indexOf("[native code")<0||isOpera?(s.addEventListener("load",e.onScriptLoad,!1),s.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,s.attachEvent("onreadystatechange",e.onScriptLoad)),s.src=i,n.onNodeCreated&&n.onNodeCreated(s,n,t,i),currentlyAddingScript=s,baseElement?head.insertBefore(s,baseElement):head.appendChild(s),currentlyAddingScript=null,s;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var s,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(s=currentlyAddingScript||getInteractiveScript())&&(e||(e=s.getAttribute("data-requiremodule")),n=contexts[s.getAttribute("data-requirecontext")]),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();define("services/key-status",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.keys={17:!1,65:!1,87:!1,68:!1,83:!1,13:!1,69:!1,32:!1,37:!1,38:!1,39:!1,40:!1}}return e.prototype.keyChange=function(e,t){this.keys[e]=t},e.prototype.isLeft=function(){return this.keys[37]},e.prototype.isRight=function(){return this.keys[39]},e.prototype.isUp=function(){return this.keys[38]},e.prototype.isDown=function(){return this.keys[40]},e.prototype.isShooting=function(){return this.keys[32]},e.prototype.isFireZeMissiles=function(){return this.keys[17]},e}();t.KeyDown=i}),define("model/entity.drones",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("model/user.drones",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i,s,n){this.color=e,this.width=t,this.height=i,this.x=s,this.y=n,this.Color=e,this.Width=t,this.Height=i,this.X=s,this.Y=n,this.sprite=new Image}return e.prototype.draw=function(e){e.fillStyle=this.color,e.drawImage(this.sprite,this.X,this.Y,this.width,this.height)},e.prototype.explode=function(){return this.health--,this.health<=0},e.prototype.update=function(e,t,i){console.log("updated from user")},e}();t.User=i}),define("model/projectile",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.Color="fff",this.Width=30,this.Height=15,this.active=!0,this.powerup=!1,this.sprite=new Image}return e.prototype.draw=function(e){e.fillStyle=this.Color,e.drawImage(this.sprite,this.X,this.Y,this.Width,this.Height)},e.prototype.explode=function(){this.active=!1},e.prototype.update=function(e,t,i){this.inBounds(e)?this.X-=this.Speed*i:this.active=!1},e.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},e}();t.Projectile=i}),define("services/asset-manager",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.ASSETS||(t.ASSETS={})).PREPEND="./assets/"}),define("model/playerBullets",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,i,n){var r=e.call(this)||this;return r.bulletCycle=128*Math.random(),r.X=i,r.Y=n,r.Speed=t,r.sprite.src=s.ASSETS.PREPEND+"drone-images/bullet1.png",r}return __extends(t,e),t.prototype.powerUpCycle=function(){this.Y+=3*Math.sin(this.bulletCycle*Math.PI/60),this.bulletCycle++},t}(i.Projectile);t.PlayerBullets=n}),define("model/player.drones",["require","exports","model/user.drones","model/playerBullets","services/asset-manager"],function(e,t,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this,"fff",90,40,200,200)||this;return t.playerVelocity=250,t.maxHealth=60,t.health=50,t.hasSprayPowerUp=!1,t.hasExplosionVelocity=!1,t.hasRoFpowerUp=!1,t.sprite.src=n.ASSETS.PREPEND+"drone-images/playerShip1.png",t}return __extends(t,e),t.prototype.update=function(e,t,i){t.isDown()&&(this.Y+=this.Y>e.canvas.height-20?0:this.playerVelocity*i),t.isUp()&&(this.Y-=this.Y<0?0:this.playerVelocity*i),t.isLeft()&&(this.X-=this.X<0?0:this.playerVelocity*i),t.isRight()&&(this.X+=this.X>e.canvas.width-20?0:this.playerVelocity*i)},t.prototype.midpoint=function(){return{x:this.X+this.Width/2,y:this.Y+this.Height/2}},t.prototype.shoot=function(e){var t=this.midpoint();return e.push(new s.PlayerBullets(-750,t.x,t.y)),e},t.prototype.explode=function(){return this.hasSprayPowerUp=!1,this.health--,this.health<=0},t.prototype.addHealth=function(e){this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth)},t.prototype.losePowerUps=function(){this.hasSprayPowerUp=!1,this.hasExplosionVelocity=!1,this.hasRoFpowerUp=!1},t}(i.User);t.Player=r}),define("model/enemy.drones",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,i,n){var r=e.call(this)||this;return r.X=i,r.Y=n,r.Speed=t,r.Width=50,r.Height=30,r.age=Math.floor(128*Math.random()),r.hasBeenShot=!1,r.sprite.src=s.ASSETS.PREPEND+"drone-images/alienship1.png",r}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?(this.X-=this.Speed*i,this.Y+=3*Math.sin(this.age*Math.PI/128),this.age++):this.active=!1},t.prototype.explode=function(){var e=this;this.hasBeenShot=!0,this.sprite.src=s.ASSETS.PREPEND+"drone-images/explode2.png",setTimeout(function(){e.active=!1},250)},t}(i.Projectile);t.Enemy=n}),define("model/powerup.drones",["require","exports","model/user.drones","services/asset-manager"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(e){function t(){var t=e.call(this,"aaa",50,41,0,200)||this;return t.showText=!1,t.active=!1,t.getNewType(),t}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?this.X-=200*i:(this.active=!1,this.X=e.canvas.width)},t.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},t.prototype.getNewType=function(){var e=10*Math.random();e>=0&&e<3?(this.sprite.src=s.ASSETS.PREPEND+"drone-images/powerup-spray.png",this.type=n.Spray):e>=3&&e<5?(this.sprite.src=s.ASSETS.PREPEND+"drone-images/powerup-health.png",this.type=n.Health):e>=5&&e<7?(this.sprite.src=s.ASSETS.PREPEND+"drone-images/powerup-explosionVelocity.png",this.type=n.explosionVelocity):e>=7&&(this.sprite.src=s.ASSETS.PREPEND+"drone-images/powerup-rOf.png",this.type=n.RoF)},t.prototype.getFlashText=function(){return this.showType===n.Spray?"Main Weapon Upgrade!":this.showType===n.Health?"+10 Health!":this.showType===n.explosionVelocity?"Increase Missile Damage":this.showType===n.RoF?"Rate of Fire Increase":void 0},t.prototype.flashInfo=function(e){var t=this;this.showType=e,this.showText=!0,setTimeout(function(){t.showText=!1},2e3)},t}(i.User);t.Powerup=r,function(e){e[e.Spray=0]="Spray",e[e.Health=1]="Health",e[e.explosionVelocity=2]="explosionVelocity",e[e.RoF=3]="RoF"}(n=t.PowerUpType||(t.PowerUpType={}))}),define("model/missile",["require","exports","model/user.drones","services/asset-manager"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t){var i=e.call(this,"fff",60,30,0,0)||this;return i.activeMissile=!1,i.missileVelocity=450,i.defaultExplosionVelocity=100,i.explodingMissile=!1,i.defaultSprite=s.ASSETS.PREPEND+"drone-images/missile1.png",i.powerupSprite=s.ASSETS.PREPEND+"drone-images/missile1-powerup.png",i.explodingSprite=s.ASSETS.PREPEND+"drone-images/explode3.png",i.needMissile=!1,i.sprite.src=t?i.powerupSprite:i.defaultSprite,i.explosionVelocity=t?400:i.defaultExplosionVelocity,i}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?this.X+=this.missileVelocity*i:this.activeMissile=!1},t.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},t.prototype.destroy=function(e){var t=this;this.activeMissile=!1,this.explodingMissile=!0,this.Width=200,this.Height=200,this.sprite.src=this.explodingSprite,setTimeout(function(){t.explodingMissile=!1,t.needMissile=!0,t.sprite.src=t.defaultSprite},200)},t}(i.User);t.Missile=n}),define("model/enemyBullets",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,i,n){var r=e.call(this)||this;return r.bulletCycle=128*Math.random(),r.X=i,r.Y=n,r.Speed=t,r.sprite.src=s.ASSETS.PREPEND+"drone-images/bossBullet1.png",r}return __extends(t,e),t.prototype.powerUpCycle=function(){this.Y+=3*Math.sin(this.bulletCycle*Math.PI/128),this.bulletCycle++},t}(i.Projectile);t.EnemyBullet=n}),define("model/boss.drones",["require","exports","model/user.drones","model/enemyBullets","services/asset-manager"],function(e,t,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this,"fff",200,100,0,300)||this;return t.active=!1,t.bossVelocity=80,t.defaultSprite=n.ASSETS.PREPEND+"drone-images/boss1.png",t.health=100,t.sprite.src=t.defaultSprite,t}return __extends(t,e),t.prototype.update=function(e,t,i){t.isDown()&&(this.Y+=this.Y>e.canvas.height-e.canvas.height/4?0:this.bossVelocity*i),t.isUp()&&(this.Y-=this.Y<0?0:this.bossVelocity*i),t.isLeft()&&(this.X-=this.X<0?0:this.bossVelocity*i),t.isRight()&&(this.X+=this.X>e.canvas.width-e.canvas.width/4?0:this.bossVelocity*i)},t.prototype.midpoint=function(){return{x:this.X+this.Width/2,y:this.Y+this.Height/2}},t.prototype.shoot=function(e){var t=this.midpoint();return e.push(new s.EnemyBullet(550,t.x,t.y)),e},t.prototype.destroy=function(e){var t=this;this.active=!1,this.explodingBoss=!0,this.sprite.src=n.ASSETS.PREPEND+"drone-images/explode3.png",setTimeout(function(){t.explodingBoss=!1,t.sprite.src=t.defaultSprite},300)},t}(i.User);t.Boss=r}),define("model/CanvasMenuObjects",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i,s,n){this.name=e,this.x=t,this.y=i,this.w=s,this.h=n}return e.prototype.isWithinBounds=function(e,t){return e<this.x+this.w&&e>this.x&&t<this.y+this.h&&t>this.y},e}();t.CanvasButton=i,t.CanvasText=function(e,t,i,s,n){this.word=e,this.x=t,this.y=i,this.color=s,this.font=n},function(e){e[e.GAME_PLAY=0]="GAME_PLAY",e[e.AUDIO_PLAY=1]="AUDIO_PLAY",e[e.NEXT=2]="NEXT",e[e.VOLUME_UP=3]="VOLUME_UP",e[e.VOLUME_DOWN=4]="VOLUME_DOWN",e[e.RESTART=5]="RESTART"}(t.CANVAS_BUTTON_NAME||(t.CANVAS_BUTTON_NAME={}))}),define("model/hud",["require","exports","services/asset-manager","model/CanvasMenuObjects"],function(e,t,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.showLevelText="Level 1",this.volOn=i.ASSETS.PREPEND+"drone-images/volume.png",this.volPaused=i.ASSETS.PREPEND+"drone-images/volume-pause.png",this.textColor="lime",this.volumeImageObj=new Image(25,25),this.volumeImageObj.src=this.volOn,this.nextImageObj=new Image(25,25),this.nextImageObj.src=i.ASSETS.PREPEND+"drone-images/volumeNext.jpg"}return e.prototype.displayText=function(e,t){var i=new s.CanvasText(t,e.canvas.width/2,e.canvas.height/6,this.textColor,"25px Jazz LET, fantasy");e.font=i.font,e.fillStyle=i.color,e.textAlign="center",e.fillText(t,i.x,i.y)},e.prototype.playerStats=function(e,t,i){var n=new s.CanvasText("Health: "+t.health.toString(),e.canvas.width/40,e.canvas.height-e.canvas.height/14,this.textColor,"17px Jazz LET, fantasy"),r=new s.CanvasText("Kills: "+i.toString(),e.canvas.width/40,e.canvas.height-e.canvas.height/10,this.textColor,"17px Jazz LET, fantasy"),o=new s.CanvasText(this.showLevelText,e.canvas.width/40,e.canvas.height-e.canvas.height/7,this.textColor,"17px Jazz LET, fantasy");e.font=n.font,e.fillStyle=this.textColor,e.strokeStyle=this.textColor,e.textAlign="left",e.fillText(n.word,n.x,n.y),e.fillText(r.word,r.x,r.y),e.fillText(o.word,o.x,o.y)},e.prototype.volumeHud=function(e){e.drawImage(this.volumeImageObj,0,0),e.drawImage(this.nextImageObj,20,0)},e.prototype.pauseVolume=function(e){this.volumeImageObj.src=e?this.volPaused:this.volOn},e.prototype.addCount=function(e,t){var i=new s.CanvasText("+1",t.X,t.Y,this.textColor,"15px Arial");e.font=i.font,e.fillStyle=i.color,e.strokeStyle=i.color,e.fillText(i.word,i.x,i.y)},e.prototype.splashScreen=function(e){var t=[],i=new s.CanvasText("DRONES",e.canvas.width/2-50,e.canvas.height/2,this.textColor,"40px Arial");e.font=i.font,e.fillStyle=i.color,e.textAlign="left";var n=new s.CanvasButton(s.CANVAS_BUTTON_NAME.GAME_PLAY,i.x-20,i.y+40,e.measureText(i.word).width+40,35);e.fillText(i.word,i.x,i.y),e.fillRect(n.x,n.y,n.w,n.h);var r=new s.CanvasText("Start",n.x+n.w/3.5,n.y+n.h-3,this.textColor,"15px Arial");e.fillStyle="black",e.fillText(r.word,r.x,r.y),t.push(n);var o=new s.CanvasText("Controls: Move: Arrow keys, Shoot: spacebar, Missles: left Ctrl",e.canvas.width/2-50,i.y+i.y/2,this.textColor,"15px Arial");return e.font=o.font,e.fillStyle=o.color,e.textAlign="center",e.fillText(o.word,o.x,o.y),t},e.prototype.pauseScreen=function(e){var t=new s.CanvasText("Paused",e.canvas.width/2,e.canvas.height/2,this.textColor,"30px Arial");return e.font=t.font,e.fillStyle=t.color,e.textAlign="center",e.fillText(t.word,t.x,t.y),[]},e.prototype.gameOverScreen=function(e){var t=[],i=new s.CanvasText("Game Over",e.canvas.width/2-50,e.canvas.height/2,this.textColor,"40px Arial");e.font=i.font,e.fillStyle=i.color,e.textAlign="left";var n=new s.CanvasButton(s.CANVAS_BUTTON_NAME.RESTART,i.x-20,i.y+40,e.measureText(i.word).width+40,35);e.fillText(i.word,i.x,i.y),e.fillRect(n.x,n.y,n.w,n.h);var r=new s.CanvasText("Restart",n.x+n.w/4,n.y+n.h-3,this.textColor,"15px Arial");return e.fillStyle="black",e.fillText(r.word,r.x,r.y),t.push(n),t},e}();t.Hud=n,function(e){e[e.SPLASH=0]="SPLASH",e[e.PAUSE=1]="PAUSE",e[e.GAME_OVER=2]="GAME_OVER"}(t.SCREEN_BTNS||(t.SCREEN_BTNS={}))}),define("services/audio.service",["require","exports","services/asset-manager"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.song=0,this.volume=.1,this.playlist=[i.ASSETS.PREPEND+"sounds/Blink.mp3",i.ASSETS.PREPEND+"sounds/getLucky.mp3",i.ASSETS.PREPEND+"sounds/trapqueen.mp3",i.ASSETS.PREPEND+"sounds/offspring.mp3"],this.audioElem=new Audio}return e.prototype.toggle=function(e){e?this.audioElem.pause():(this.audioElem.volume=this.volume,this.audioElem.play())},e.prototype.next=function(){this.song++,this.song>=this.playlist.length&&(this.song=0),this.audioElem.pause(),this.audioElem.src=this.playlist[this.song],this.audioElem.volume=this.volume,this.audioElem.play()},e}();t.AudioService=s}),define("services/drones-manager.service",["require","exports","model/player.drones","services/key-status","model/enemy.drones","model/powerup.drones","model/missile","model/boss.drones","model/hud"],function(e,t,i,s,n,r,o,a,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){this.hud=new h.Hud,this.player=new i.Player,this.keyHandler=new s.KeyDown,this.powerUp=new r.Powerup,this.playerMissile=new o.Missile(!1),this.boss=new a.Boss,this.dT=0,this.pauseGame=!1,this.pauseGameTime=!0,this.playerRoF=0,this.playerBullets=[],this.enemyFleet=[],this.enemyBullets=[],this.GAME_DIFFICULTY=.04,this.GameOver=!1,this.KILLS=0}return e.prototype.keyChange=function(e,t){13===e&&this.pauseGameTime&&(this.timeout(),this.pauseGameTime=!1),this.keyHandler.keyChange(e,t)},e.prototype.update=function(e,t){this.dT=t,this.updateUserLocations(e),this.updateProjectileLocations(e),this.updateEnemiesLocation(e),this.randomizedGameElements(e),this.checkCollitions(e)},e.prototype.draw=function(e){var t=this;this.player.draw(e),this.powerUp.active&&this.powerUp.draw(e),this.powerUp.showText&&this.hud.displayText(e,this.powerUp.getFlashText()),(this.playerMissile.activeMissile||this.playerMissile.explodingMissile)&&this.playerMissile.draw(e),this.playerBullets.forEach(function(t){t.draw(e)}),this.enemyFleet.forEach(function(i){console.log(i.Speed),i.draw(e),i.hasBeenShot&&i.active&&t.hud.addCount(e,i)}),(this.boss.active||this.boss.explodingBoss)&&this.boss.draw(e),this.enemyBullets.forEach(function(t){t.draw(e)}),this.hud.playerStats(e,this.player,this.KILLS),this.hud.volumeHud(e)},e.prototype.updateUserLocations=function(e){this.player.update(e,this.keyHandler,this.dT)},e.prototype.updateProjectileLocations=function(e){var t=this;this.keyHandler.isShooting()&&(0===this.playerRoF&&(this.playerBullets=this.player.shoot(this.playerBullets)),this.player.hasRoFpowerUp?this.playerRoF=0:(this.playerRoF++,5===this.playerRoF&&(this.playerRoF=0))),this.playerBullets.forEach(function(i){i.update(e,null,t.dT),t.player.hasSprayPowerUp&&i.powerUpCycle()}),this.playerBullets=this.playerBullets.filter(function(e){return e.active}),this.enemyBullets=this.enemyBullets.filter(function(e){return e.active}),this.playerMissile.activeMissile||!this.keyHandler.isFireZeMissiles()||this.playerMissile.explodingMissile||(this.playerMissile.activeMissile=!0,this.playerMissile.X=this.player.X,this.playerMissile.Y=this.player.Y),this.playerMissile.activeMissile&&this.playerMissile.update(e,null,this.dT),this.powerUp.active&&this.powerUp.update(e,null,this.dT)},e.prototype.updateEnemiesLocation=function(e){var t=this;Math.random()<this.GAME_DIFFICULTY+.02&&this.enemyFleet.push(new n.Enemy(200,e.canvas.width-30,e.canvas.width/12+Math.random()*e.canvas.width/3)),this.enemyFleet.forEach(function(i){i.update(e,null,t.dT)}),this.enemyFleet=this.enemyFleet.filter(function(e){return e.active}),this.boss.active&&(this.boss.update(e,this.keyHandler,this.dT),Math.random()<this.GAME_DIFFICULTY&&(this.enemyBullets=this.boss.shoot(this.enemyBullets))),this.enemyBullets.forEach(function(i){i.update(e,null,t.dT),i.powerUpCycle()})},e.prototype.randomizedGameElements=function(e){this.powerUp.active||1e4*Math.random()<40&&(this.powerUp.active=!0,this.powerUp.X=e.canvas.width,this.powerUp.Y=this.getRandomHeight(e)),this.boss.active||this.KILLS%273==0&&(this.boss.active=!0,this.boss.health=500,this.boss.X=e.canvas.width-300,this.boss.Y=e.canvas.height/2)},e.prototype.checkCollitions=function(e){var t=this;this.enemyFleet.forEach(function(e){e.hasBeenShot||t.playerBullets.forEach(function(i){t.collides(e,i)&&(t.KILLS++,e.explode(),i.active=!1)})}),this.enemyFleet.forEach(function(i){i.hasBeenShot||(t.collides(i,t.player)&&(t.GameOver=t.player.explode(),i.explode(),t.removePowerups()),t.playerMissile.activeMissile&&t.collides(t.playerMissile,i)&&(t.KILLS++,i.explode(),t.playerMissile.destroy(e),t.enemyFleet.forEach(function(e){t.bombCollides(t.playerMissile,e,t.playerMissile.explosionVelocity)&&(t.KILLS++,e.explode())})))}),this.powerUp.active&&this.collides(this.player,this.powerUp)&&(this.powerUp.type===r.PowerUpType.Spray?this.player.hasSprayPowerUp=!0:this.powerUp.type===r.PowerUpType.Health?this.player.addHealth(10):this.powerUp.type===r.PowerUpType.explosionVelocity?(this.player.hasExplosionVelocity=!0,this.playerMissile.explosionVelocity=400):this.powerUp.type===r.PowerUpType.RoF&&(this.player.hasRoFpowerUp=!0),this.powerUp.flashInfo(this.powerUp.type),this.powerUp.active=!1,this.powerUp.X=e.canvas.width,this.powerUp.getNewType()),this.boss.active&&(this.playerBullets.forEach(function(e){t.collides(t.boss,e)&&(t.boss.health--,t.boss.health<=0&&(t.boss.active=!1),e.active=!1)}),this.playerMissile.activeMissile&&this.collides(this.playerMissile,this.boss)&&(this.boss.health-=this.player.hasExplosionVelocity?100:50,this.playerMissile.destroy(e),this.boss.health<=0&&this.boss.destroy(e),this.enemyFleet.forEach(function(e){t.bombCollides(t.playerMissile,e,t.playerMissile.explosionVelocity)&&(t.KILLS++,e.explode())}))),this.enemyBullets.forEach(function(e){t.collides(e,t.player)&&(e.active=!1,t.player.health--,t.removePowerups(),t.GameOver=t.player.explode())}),this.playerMissile.needMissile&&(this.playerMissile=new o.Missile(this.player.hasExplosionVelocity)),this.KILLS>100&&.07!==this.GAME_DIFFICULTY&&(this.GAME_DIFFICULTY=.07,this.hud.showLevelText="Level 2"),this.KILLS>500&&.13!==this.GAME_DIFFICULTY&&(this.GAME_DIFFICULTY=.13,this.hud.showLevelText="Level 3")},e.prototype.collides=function(e,t){return e.X<t.X+t.Width&&e.X+e.Width>t.X&&e.Y<t.Y+t.Height&&e.Y+e.Height>t.Y},e.prototype.bombCollides=function(e,t,i){return e.X<t.X+i+t.Width&&e.X+e.Width>t.X-i&&e.Y<t.Y+i+t.Width&&e.Y+e.Height>t.Y-i},e.prototype.timeout=function(){var e=this;setTimeout(function(){e.pauseGame=!e.pauseGame,e.pauseGameTime=!0},150)},e.prototype.getRandomHeight=function(e){var t=Math.floor(1e3*Math.random())+1;return t<10&&(t=10),t%2==0&&(t+=100),t>e.canvas.height&&(t-=t-e.canvas.height),t>e.canvas.height-50&&(t=e.canvas.height-100),t},e.prototype.removePowerups=function(){this.player.losePowerUps(),this.playerMissile.explosionVelocity=this.playerMissile.defaultExplosionVelocity},e}();t.DronesManagerService=l}),define("DronesCanvas",["require","exports","services/drones-manager.service","services/audio.service","model/CanvasMenuObjects","model/hud"],function(e,t,i,s,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.canvasElementName=e,this.lastTime=(new Date).getTime(),this.interval=1e3/30,this.audioPause=!1,this.canvasButtonList=[],this.loop=function(){t.gameLoop=window.requestAnimationFrame(t.loop);var e=(new Date).getTime();t.deltaTime=(e-t.lastTime)/1e3,t.gameManager.pauseGame||t.gameManager.GameOver?t.gameManager.pauseGame?t.buildCanvasButtons(r.SCREEN_BTNS.PAUSE):t.gameManager.GameOver&&t.buildCanvasButtons(r.SCREEN_BTNS.GAME_OVER):(t.CanvasObject.clearRect(0,0,t.CanvasObject.canvas.width,t.CanvasObject.canvas.height),t.gameManager.update(t.CanvasObject,t.deltaTime),t.gameManager.draw(t.CanvasObject)),t.lastTime=e-t.deltaTime%t.interval},this.CanvasObject=e.getContext("2d"),this.gameManager=new i.DronesManagerService,this.audioService=new s.AudioService}return e.prototype.init=function(){var e=this;window.document.body.style.backgroundColor="black";var t=this.getWindowSize();this.CanvasObject.canvas.width=t[0]-15,this.CanvasObject.canvas.height=t[1]-25,this.hud=this.gameManager.hud,this.buildCanvasButtons(r.SCREEN_BTNS.SPLASH),document.addEventListener("keydown",function(t){e.gameManager.keyChange(t.keyCode,!0)}),document.addEventListener("keyup",function(t){e.gameManager.keyChange(t.keyCode,!1)}),this.canvasElementName.addEventListener("click",function(t){e.runButtonChecks({x:t.clientX,y:t.clientY})})},e.prototype.start=function(){this.gameManager.GameOver=!1,this.audioService.next(),this.loop()},e.prototype.reset=function(){this.gameManager=null,this.gameLoop=null,this.gameManager=new i.DronesManagerService,this.audioService.next(),this.lastTime=(new Date).getTime(),this.deltaTime=0,this.interval=1e3/30,this.canvasButtonList=[],this.hud=this.gameManager.hud,this.loop()},e.prototype.getWindowSize=function(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),[e,t]},e.prototype.setDifficulty=function(e){switch(e){case 1:this.gameManager.GAME_DIFFICULTY=.04;break;case 2:this.gameManager.GAME_DIFFICULTY=.07;break;case 3:this.gameManager.GAME_DIFFICULTY=.13;break;default:this.gameManager.GAME_DIFFICULTY=.07}this.gameManager.playerRoF=0},e.prototype.buildCanvasButtons=function(e){switch(this.canvasButtonList=[],e){case r.SCREEN_BTNS.SPLASH:this.canvasButtonList=this.hud.splashScreen(this.CanvasObject);break;case r.SCREEN_BTNS.PAUSE:this.canvasButtonList=this.hud.pauseScreen(this.CanvasObject);break;case r.SCREEN_BTNS.GAME_OVER:this.canvasButtonList=this.hud.gameOverScreen(this.CanvasObject)}this.canvasButtonList.push(new n.CanvasButton(n.CANVAS_BUTTON_NAME.AUDIO_PLAY,0,0,30,50)),this.canvasButtonList.push(new n.CanvasButton(n.CANVAS_BUTTON_NAME.NEXT,30,0,30,50))},e.prototype.runButtonChecks=function(e){var t=this;this.canvasButtonList.forEach(function(i){switch(i.name){case n.CANVAS_BUTTON_NAME.AUDIO_PLAY:i.isWithinBounds(e.x,e.y)&&(t.audioPause=!t.audioPause,t.audioService.toggle(t.audioPause),t.hud.pauseVolume(t.audioPause));break;case n.CANVAS_BUTTON_NAME.NEXT:i.isWithinBounds(e.x,e.y)&&t.audioService.next();break;case n.CANVAS_BUTTON_NAME.GAME_PLAY:i.isWithinBounds(e.x,e.y)&&t.start();break;case n.CANVAS_BUTTON_NAME.RESTART:i.isWithinBounds(e.x,e.y)&&t.reset()}})},e}();t.DronesCanvas=o});