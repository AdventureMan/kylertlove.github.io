var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var i;if(e)for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}function eachReverse(e,t){var i;if(e)for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,s){!i&&hasProp(e,s)||(!n||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[s]=t:(e[s]||(e[s]={}),mixin(e[s],t,i,n)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var s=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return s.requireType=e,s.requireModules=n,i&&(s.originalError=i),s}function newContext(e){function t(e,t,i){var n,s,r,o,a,h,l,u,c,p,d=t&&t.split("/"),f=w.map,m=f&&f["*"];if(e&&(h=(e=e.split("/")).length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[h])&&(e[h]=e[h].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&d&&(e=d.slice(0,d.length-1).concat(e)),function(e){var t,i;for(t=0;t<e.length;t++)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),i&&f&&(d||m)){e:for(r=(s=e.split("/")).length;r>0;r-=1){if(a=s.slice(0,r).join("/"),d)for(o=d.length;o>0;o-=1)if((n=getOwn(f,d.slice(0,o).join("/")))&&(n=getOwn(n,a))){l=n,u=r;break e}!c&&m&&getOwn(m,a)&&(c=getOwn(m,a),p=r)}!l&&c&&(l=c,u=p),l&&(s.splice(0,u,l),e=s.join("/"))}return getOwn(w.pkgs,e)||e}function i(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===v.contextName)return t.parentNode.removeChild(t),!0})}function n(e){var t=getOwn(w.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),v.require.undef(e),v.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function r(e,i,n,r){var o,a,h,l,u=null,c=i?i.name:null,p=e,d=!0,f="";return e||(d=!1,e="_@r"+(C+=1)),e=(l=s(e))[1],(u=l[0])&&(u=t(u,c,r),a=getOwn(A,u)),e&&(u?f=n?e:a&&a.normalize?a.normalize(e,function(e){return t(e,c,r)}):-1===e.indexOf("!")?t(e,c,r):e:(u=(l=s(f=t(e,c,r)))[0],n=!0,o=v.nameToUrl(f=l[1]))),{prefix:u,name:f,parentMap:i,unnormalized:!!(h=!u||a||n?"":"_unnormalized"+(U+=1)),url:o,originalName:p,isDefine:d,id:(u?u+"!"+f:f)+h}}function o(e){var t=e.id,i=getOwn(b,t);return i||(i=b[t]=new v.Module(e)),i}function a(e,t,i){var n=e.id,s=getOwn(b,n);!hasProp(A,n)||s&&!s.defineEmitComplete?(s=o(e)).error&&"error"===t?i(s.error):s.on(t,i):"defined"===t&&i(A[n])}function h(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(b,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function l(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(v.defQueueMap[t]=!0),T.push(e)}),globalDefQueue=[])}function u(e){delete b[e],delete S[e]}function c(){var e,t,s=1e3*w.waitSeconds,r=s&&v.startTime+s<(new Date).getTime(),o=[],a=[],l=!1,u=!0;if(!y){if(y=!0,eachProp(S,function(e){var s=e.map,h=s.id;if(e.enabled&&(s.isDefine||a.push(e),!e.error))if(!e.inited&&r)n(h)?(t=!0,l=!0):(o.push(h),i(h));else if(!e.inited&&e.fetched&&s.isDefine&&(l=!0,!s.prefix))return u=!1}),r&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=v.contextName,h(e);u&&each(a,function(e){!function e(t,i,n){var s=t.map.id;t.error?t.emit("error",t.error):(i[s]=!0,each(t.depMaps,function(s,r){var o=s.id,a=getOwn(b,o);!a||t.depMatched[r]||n[o]||(getOwn(i,o)?(t.defineDep(r,A[o]),t.check()):e(a,i,n))}),n[s]=!0)}(e,{},{})}),r&&!t||!l||!isBrowser&&!isWebWorker||E||(E=setTimeout(function(){E=0,c()},50)),y=!1}}function p(e){hasProp(A,e[0])||o(r(e[0],null,!0)).init(e[1],e[2])}function d(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function f(e){var t=e.currentTarget||e.srcElement;return d(t,v.onScriptLoad,"load","onreadystatechange"),d(t,v.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function m(){var e;for(l();T.length;){if(null===(e=T.shift())[0])return h(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}v.defQueueMap={}}var y,g,v,x,E,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},b={},S={},M={},T=[],A={},P={},O={},C=1,U=1;return x={require:function(e){return e.require?e.require:e.require=v.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?A[e.map.id]=e.exports:e.exports=A[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(g=function(e){this.events=getOwn(M,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,v.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();v.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,v.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,s=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=v.execCb(i,r,n,s)}catch(t){e=t}else s=v.execCb(i,r,n,s);if(this.map.isDefine&&void 0===s&&((t=this.module)?s=t.exports:this.usingExports&&(s=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",h(this.error=e)}else s=r;if(this.exports=s,this.map.isDefine&&!this.ignore&&(A[i]=s,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(v,this.map,o)}u(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(v.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,n=r(e.prefix);this.depMaps.push(n),a(n,"defined",bind(this,function(n){var s,l,c,p=getOwn(O,this.map.id),d=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=v.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(d=n.normalize(d,function(e){return t(e,f,!0)})||""),a(l=r(e.prefix+"!"+d,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=l,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(b,l.id))&&(this.depMaps.push(l),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):p?(this.map.url=v.nameToUrl(p),void this.load()):((s=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],eachProp(b,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&u(e.map.id)}),h(e)}),s.fromText=bind(this,function(t,n){var a=e.name,l=r(a),u=useInteractive;n&&(t=n),u&&(useInteractive=!1),o(l),hasProp(w.config,i)&&(w.config[a]=w.config[i]);try{req.exec(t)}catch(e){return h(makeError("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}u&&(useInteractive=!0),this.depMaps.push(l),v.completeLoad(a),m([a],s)}),void n.load(e.name,m,s,w))})),v.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,s;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,s=getOwn(x,e.id))return void(this.depExports[t]=s(this));this.depCount+=1,a(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?a(e,"error",bind(this,this.errback)):this.events.error&&a(e,"error",bind(this,function(e){this.emit("error",e)}))}n=b[i=e.id],hasProp(x,i)||!n||n.enabled||v.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(b,e.id);t&&!t.enabled&&v.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(v={config:w,contextName:e,registry:b,defined:A,urlFetched:P,defQueue:T,defQueueMap:{},Module:g,makeModuleMap:r,nextTick:req.nextTick,onError:h,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(-1===i.indexOf("?")?"?":"&")+t}}var i=w.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=v.makeShimExports(e)),i[t]=e}),w.shim=i),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(w.paths[t]=e.location),w.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(b,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t,null,!0))}),(e.deps||e.callback)&&v.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(n,s){function a(t,i,l){var u,p,d;return s.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof t?isFunction(i)?h(makeError("requireargs","Invalid require call"),l):n&&hasProp(x,t)?x[t](b[n.id]):req.get?req.get(v,t,n,a):(p=r(t,n,!1,!0),hasProp(A,u=p.id)?A[u]:h(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(m(),v.nextTick(function(){m(),(d=o(r(null,n))).skipMap=s.skipMap,d.init(t,i,l,{enabled:!0}),c()}),a)}return s=s||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,s=e.lastIndexOf("."),r=e.split("/")[0];return-1!==s&&(!("."===r||".."===r)||s>1)&&(i=e.substring(s,e.length),e=e.substring(0,s)),v.nameToUrl(t(e,n&&n.id,!0),i,!0)},defined:function(e){return hasProp(A,r(e,n,!1,!0).id)},specified:function(e){return e=r(e,n,!1,!0).id,hasProp(A,e)||hasProp(b,e)}}),n||(a.undef=function(e){l();var t=r(e,n,!0),s=getOwn(b,e);s.undefed=!0,i(e),delete A[e],delete P[t.url],delete M[e],eachReverse(T,function(t,i){t[0]===e&&T.splice(i,1)}),delete v.defQueueMap[e],s&&(s.events.defined&&(M[e]=s.events),u(e))}),a},enable:function(e){getOwn(b,e.id)&&o(e).enable()},completeLoad:function(e){var t,i,s,r=getOwn(w.shim,e)||{},o=r.exports;for(l();T.length;){if(null===(i=T.shift())[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);p(i)}if(v.defQueueMap={},s=getOwn(b,e),!t&&!hasProp(A,e)&&s&&!s.inited){if(!(!w.enforceDefine||o&&getGlobal(o)))return n(e)?void 0:h(makeError("nodefine","No define call for "+e,null,[e]));p([e,r.deps||[],r.exportsFn])}c()},nameToUrl:function(e,t,i){var n,s,r,o,a,h,l=getOwn(w.pkgs,e);if(l&&(e=l),h=getOwn(O,e))return v.nameToUrl(h,t,i);if(req.jsExtRegExp.test(e))o=e+(t||"");else{for(n=w.paths,r=(s=e.split("/")).length;r>0;r-=1)if(a=getOwn(n,s.slice(0,r).join("/"))){isArray(a)&&(a=a[0]),s.splice(0,r,a);break}o=s.join("/"),o=("/"===(o+=t||(/^data\:|^blob\:|\?/.test(o)||i?"":".js")).charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+o}return w.urlArgs&&!/^blob\:/.test(o)?o+w.urlArgs(e,o):o},load:function(e,t){req.load(v,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=f(e);v.completeLoad(t.id)}},onScriptError:function(e){var t=f(e);if(!n(t.id)){var i=[];return eachProp(b,function(e,n){0!==n.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(n),!0})}),h(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}}).require=v.makeRequire(),v}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var s,r,o=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=i,i=n):e=[]),r&&r.context&&(o=r.context),(s=getOwn(contexts,o))||(s=contexts[o]=req.s.newContext(o)),r&&s.configure(r),s.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var n=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return n.type=e.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n},req.load=function(e,t,i){var n,s=e&&e.config||{};if(isBrowser)return(n=req.createNode(s,t,i)).setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,s.onNodeCreated&&s.onNodeCreated(n,s,t,i),currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(n){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,n,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var n,s;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript())&&(e||(e=n.getAttribute("data-requiremodule")),s=contexts[n.getAttribute("data-requirecontext")]),s?(s.defQueue.push([e,t,i]),s.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("services/key-status",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.keys={17:!1,65:!1,87:!1,68:!1,83:!1,13:!1,69:!1,32:!1,37:!1,38:!1,39:!1,40:!1}}return e.prototype.keyChange=function(e,t){this.keys[e]=t},e.prototype.isLeft=function(){return this.keys[37]},e.prototype.isRight=function(){return this.keys[39]},e.prototype.isUp=function(){return this.keys[38]},e.prototype.isDown=function(){return this.keys[40]},e.prototype.isShooting=function(){return this.keys[32]},e.prototype.isFireZeMissiles=function(){return this.keys[17]},e}();t.KeyDown=i}),define("model/entity.drones",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("model/user.drones",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i,n,s){this.color=e,this.width=t,this.height=i,this.x=n,this.y=s,this.Color=e,this.Width=t,this.Height=i,this.X=n,this.Y=s,this.sprite=new Image}return e.prototype.draw=function(e){e.fillStyle=this.color,e.drawImage(this.sprite,this.X,this.Y,this.width,this.height)},e.prototype.explode=function(){return this.health--,this.health<=0},e.prototype.update=function(e,t,i){},e}();t.User=i}),define("model/projectile",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.Color="fff",this.Width=30,this.Height=15,this.active=!0,this.powerup=!1,this.sprite=new Image}return e.prototype.draw=function(e){e.fillStyle=this.Color,e.drawImage(this.sprite,this.X,this.Y,this.Width,this.Height)},e.prototype.explode=function(){this.active=!1},e.prototype.update=function(e,t,i){this.inBounds(e)?this.X-=this.Speed*i:this.active=!1},e.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},e}();t.Projectile=i}),define("services/asset-manager",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.ASSETS||(t.ASSETS={})).PREPEND="./assets/"}),define("model/playerBullets",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,i,s){var r=e.call(this)||this;return r.bulletCycle=128*Math.random(),r.X=i,r.Y=s,r.Speed=t,r.sprite.src=n.ASSETS.PREPEND+"drone-images/bullet1.png",r}return __extends(t,e),t.prototype.powerUpCycle=function(){this.Y+=3*Math.sin(this.bulletCycle*Math.PI/60),this.bulletCycle++},t}(i.Projectile);t.PlayerBullets=s}),define("model/player.drones",["require","exports","model/user.drones","model/playerBullets","services/asset-manager"],function(e,t,i,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this,"fff",90,40,200,200)||this;return t.playerVelocity=250,t.maxHealth=60,t.health=50,t.hasSprayPowerUp=!1,t.hasExplosionVelocity=!1,t.hasRoFpowerUp=!1,t.sprite.src=s.ASSETS.PREPEND+"drone-images/playerShip1.png",t}return __extends(t,e),t.prototype.update=function(e,t,i){t.isDown()&&(this.Y+=this.Y>e.canvas.height-20?0:this.playerVelocity*i),t.isUp()&&(this.Y-=this.Y<0?0:this.playerVelocity*i),t.isLeft()&&(this.X-=this.X<0?0:this.playerVelocity*i),t.isRight()&&(this.X+=this.X>e.canvas.width-20?0:this.playerVelocity*i)},t.prototype.midpoint=function(){return{x:this.X+this.Width/2,y:this.Y+this.Height/2}},t.prototype.shoot=function(e){var t=this.midpoint();return e.push(new n.PlayerBullets(-750,t.x,t.y)),e},t.prototype.explode=function(){return this.hasSprayPowerUp=!1,this.health--,this.health<=0},t.prototype.addHealth=function(e){this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth)},t.prototype.losePowerUps=function(){this.hasSprayPowerUp=!1,this.hasExplosionVelocity=!1,this.hasRoFpowerUp=!1},t}(i.User);t.Player=r}),define("model/enemy.drones",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,i,s){var r=e.call(this)||this;return r.X=i,r.Y=s,r.Speed=t,r.Width=50,r.Height=30,r.age=Math.floor(128*Math.random()),r.hasBeenShot=!1,r.sprite.src=n.ASSETS.PREPEND+"drone-images/alienship1.png",r}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?(this.X-=this.Speed*i,this.Y+=3*Math.sin(this.age*Math.PI/128),this.age++):this.active=!1},t.prototype.explode=function(){var e=this;this.hasBeenShot=!0,this.sprite.src=n.ASSETS.PREPEND+"drone-images/explode2.png",setTimeout(function(){e.active=!1},250)},t}(i.Projectile);t.Enemy=s}),define("model/powerup.drones",["require","exports","model/user.drones","services/asset-manager"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=function(e){function t(){var t=e.call(this,"aaa",50,41,0,200)||this;return t.showText=!1,t.active=!1,t.getNewType(),t}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?this.X-=200*i:(this.active=!1,this.X=e.canvas.width)},t.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},t.prototype.getNewType=function(){var e=10*Math.random();e>=0&&e<3?(this.sprite.src=n.ASSETS.PREPEND+"drone-images/powerup-spray.png",this.type=s.Spray):e>=3&&e<5?(this.sprite.src=n.ASSETS.PREPEND+"drone-images/powerup-health.png",this.type=s.Health):e>=5&&e<7?(this.sprite.src=n.ASSETS.PREPEND+"drone-images/powerup-explosionVelocity.png",this.type=s.explosionVelocity):e>=7&&(this.sprite.src=n.ASSETS.PREPEND+"drone-images/powerup-rOf.png",this.type=s.RoF)},t.prototype.getFlashText=function(){return this.showType===s.Spray?"Main Weapon Upgrade!":this.showType===s.Health?"+10 Health!":this.showType===s.explosionVelocity?"Increase Missile Damage":this.showType===s.RoF?"Rate of Fire Increase":void 0},t.prototype.flashInfo=function(e){var t=this;this.showType=e,this.showText=!0,setTimeout(function(){t.showText=!1},2e3)},t}(i.User);t.Powerup=r,function(e){e[e.Spray=0]="Spray",e[e.Health=1]="Health",e[e.explosionVelocity=2]="explosionVelocity",e[e.RoF=3]="RoF"}(s=t.PowerUpType||(t.PowerUpType={}))}),define("model/missile",["require","exports","model/user.drones","services/asset-manager"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var i=e.call(this,"fff",60,30,0,0)||this;return i.activeMissile=!1,i.missileVelocity=450,i.defaultExplosionVelocity=100,i.explodingMissile=!1,i.defaultSprite=n.ASSETS.PREPEND+"drone-images/missile1.png",i.powerupSprite=n.ASSETS.PREPEND+"drone-images/missile1-powerup.png",i.explodingSprite=n.ASSETS.PREPEND+"drone-images/explode3.png",i.needMissile=!1,i.sprite.src=t?i.powerupSprite:i.defaultSprite,i.explosionVelocity=t?400:i.defaultExplosionVelocity,i}return __extends(t,e),t.prototype.update=function(e,t,i){this.inBounds(e)?this.X+=this.missileVelocity*i:this.activeMissile=!1},t.prototype.inBounds=function(e){return this.X>=0&&this.X<=e.canvas.width&&this.Y>=0&&this.Y<=e.canvas.height},t.prototype.destroy=function(e){var t=this;this.activeMissile=!1,this.explodingMissile=!0,this.Width=200,this.Height=200,this.sprite.src=this.explodingSprite,setTimeout(function(){t.explodingMissile=!1,t.needMissile=!0,t.sprite.src=t.defaultSprite},200)},t}(i.User);t.Missile=s}),define("model/enemyBullets",["require","exports","model/projectile","services/asset-manager"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,i,s){var r=e.call(this)||this;return r.bulletCycle=128*Math.random(),r.X=i,r.Y=s,r.Speed=t,r.sprite.src=n.ASSETS.PREPEND+"drone-images/bossBullet1.png",r}return __extends(t,e),t.prototype.powerUpCycle=function(){this.Y+=3*Math.sin(this.bulletCycle*Math.PI/128),this.bulletCycle++},t}(i.Projectile);t.EnemyBullet=s}),define("model/boss.drones",["require","exports","model/user.drones","model/enemyBullets","services/asset-manager"],function(e,t,i,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this,"fff",200,100,0,300)||this;return t.active=!1,t.bossVelocity=80,t.defaultSprite=s.ASSETS.PREPEND+"drone-images/boss1.png",t.health=100,t.sprite.src=t.defaultSprite,t}return __extends(t,e),t.prototype.update=function(e,t,i){t.isDown()&&(this.Y+=this.Y>e.canvas.height-e.canvas.height/4?0:this.bossVelocity*i),t.isUp()&&(this.Y-=this.Y<0?0:this.bossVelocity*i),t.isLeft()&&(this.X-=this.X<0?0:this.bossVelocity*i),t.isRight()&&(this.X+=this.X>e.canvas.width-e.canvas.width/4?0:this.bossVelocity*i)},t.prototype.midpoint=function(){return{x:this.X+this.Width/2,y:this.Y+this.Height/2}},t.prototype.shoot=function(e){var t=this.midpoint();return e.push(new n.EnemyBullet(550,t.x,t.y)),e},t.prototype.destroy=function(e){var t=this;this.active=!1,this.explodingBoss=!0,this.sprite.src=s.ASSETS.PREPEND+"drone-images/explode3.png",setTimeout(function(){t.explodingBoss=!1,t.sprite.src=t.defaultSprite},300)},t}(i.User);t.Boss=r}),define("model/CanvasMenuObjects",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i,n,s){this.name=e,this.x=t,this.y=i,this.w=n,this.h=s}return e.prototype.isWithinBounds=function(e,t){return e<this.x+this.w&&e>this.x&&t<this.y+this.h&&t>this.y},e}();t.CanvasButton=i,t.CanvasText=function(e,t,i,n,s){this.word=e,this.x=t,this.y=i,this.color=n,this.font=s},function(e){e[e.GAME_PLAY=0]="GAME_PLAY",e[e.AUDIO_PLAY=1]="AUDIO_PLAY",e[e.NEXT=2]="NEXT",e[e.VOLUME_UP=3]="VOLUME_UP",e[e.VOLUME_DOWN=4]="VOLUME_DOWN",e[e.RESTART=5]="RESTART"}(t.CANVAS_BUTTON_NAME||(t.CANVAS_BUTTON_NAME={}))}),define("model/hud",["require","exports","services/asset-manager","model/CanvasMenuObjects"],function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.showLevelText="Level 1",this.volOn=i.ASSETS.PREPEND+"drone-images/volume.png",this.volPaused=i.ASSETS.PREPEND+"drone-images/volume-pause.png",this.textColor="lime",this.volumeImageObj=new Image(25,25),this.volumeImageObj.src=this.volOn,this.nextImageObj=new Image(25,25),this.nextImageObj.src=i.ASSETS.PREPEND+"drone-images/volumeNext.jpg",this.createGUI()}return e.prototype.displayText=function(e,t){var i=new n.CanvasText(t,e.canvas.width/2,e.canvas.height/6,this.textColor,"25px Jazz LET, fantasy");e.font=i.font,e.fillStyle=i.color,e.textAlign="center",e.fillText(t,i.x,i.y)},e.prototype.playerStats=function(e,t,i){var s=new n.CanvasText("Health: "+t.health.toString(),e.canvas.width/40,e.canvas.height-e.canvas.height/14,this.textColor,"17px Jazz LET, fantasy"),r=new n.CanvasText("Kills: "+i.toString(),e.canvas.width/40,e.canvas.height-e.canvas.height/10,this.textColor,"17px Jazz LET, fantasy"),o=new n.CanvasText(this.showLevelText,e.canvas.width/40,e.canvas.height-e.canvas.height/7,this.textColor,"17px Jazz LET, fantasy");e.font=s.font,e.fillStyle=this.textColor,e.strokeStyle=this.textColor,e.textAlign="left",e.fillText(s.word,s.x,s.y),e.fillText(r.word,r.x,r.y),e.fillText(o.word,o.x,o.y)},e.prototype.volumeHud=function(e){e.drawImage(this.volumeImageObj,0,0),e.drawImage(this.nextImageObj,20,0)},e.prototype.pauseVolume=function(e){this.volumeImageObj.src=e?this.volPaused:this.volOn},e.prototype.addCount=function(e,t){var i=new n.CanvasText("+1",t.X,t.Y,this.textColor,"15px Arial");e.font=i.font,e.fillStyle=i.color,e.strokeStyle=i.color,e.fillText(i.word,i.x,i.y)},e.prototype.splashScreen=function(e){var t=this;this.clearGUI();var i=document.createElement("LABEL");i.innerText="DRONES",i.setAttribute("style","color:lime;font:40px Verdana;font-weight: 700;");var n=document.createElement("BUTTON");n.innerText="Start",n.setAttribute("style","color:lime;font:20px Verdana;font-weight: 700;background-color:black;border:2px solid lime;width:15%;height:50px;transition:.3s;cursor:pointer;box-shadow:0 0 15px lime;border-radius: 12px;"),n.onclick=function(){e.start(),t.clearGUI()},n.onmouseover=function(){n.setAttribute("style","color:black;font:20px Verdana;font-weight: 700;background-color:lime;border:2px solid lime;width:15%;height:50px;transition:.6s;cursor:pointer;box-shadow:0 0 25px lime;border-radius: 12px;")},n.onmouseleave=function(){n.setAttribute("style","color:lime;font:20px Verdana;font-weight: 700;background-color:black;border:2px solid lime;width:15%;height:50px;transition:.3s;cursor:pointer;box-shadow:0 0 15px lime;border-radius: 12px;")};var s=document.createElement("LABEL");s.setAttribute("style","color:lime;font:16px Verdana;position: absolute;bottom: 0;left: 32%;margin-bottom: 15%;"),s.innerText="Arrows to move; Spacebar to shoot; left ctrl for missiles";var r=this.getNewLineElem(5);this.guiBox.insertAdjacentElement("afterbegin",r),r.insertAdjacentElement("afterend",i);var o=this.getNewLineElem(25);i.insertAdjacentElement("afterend",o),o.insertAdjacentElement("afterend",n);var a=this.getNewLineElem(10);n.insertAdjacentElement("afterend",a),a.insertAdjacentElement("afterend",s)},e.prototype.pauseScreen=function(){this.clearGUI();var e=document.createElement("LABEL");e.innerText="PAUSED",e.setAttribute("style","color:lime;font:40px Verdana;"),this.guiBox.insertAdjacentElement("afterbegin",e)},e.prototype.gameOverScreen=function(){this.clearGUI();var e=document.createElement("LABEL");e.innerText="GAME OVER",e.setAttribute("style","color:lime;font:40px Verdana;"),this.guiBox.insertAdjacentElement("afterbegin",e)},e.prototype.createGUI=function(){var e=window.document.getElementById("canvasElem"),t=window.document.createElement("DIV");t.id="gui",t.setAttribute("style","position:absolute;top:0;float:left; width:99%;height:99vh;text-align:center;z-index:5;"),e.insertAdjacentElement("afterend",t),this.guiBox=window.document.createElement("DIV"),this.guiBox.id="guiBox",this.guiBox.setAttribute("style","float:left;color:lime;margin-top:15%;height:50%;width:100%;text-align:center;"),t.insertAdjacentElement("afterbegin",this.guiBox)},e.prototype.clearGUI=function(){for(;this.guiBox.firstChild;)this.guiBox.removeChild(this.guiBox.firstChild)},e.prototype.getNewLineElem=function(e){var t=document.createElement("DIV");return t.setAttribute("style","height:"+e+"px;"),t},e}();t.Hud=s,function(e){e[e.SPLASH=0]="SPLASH",e[e.PAUSE=1]="PAUSE",e[e.GAME_OVER=2]="GAME_OVER"}(t.SCREEN_ACTIONS||(t.SCREEN_ACTIONS={}))}),define("services/audio.service",["require","exports","services/asset-manager"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.song=0,this.volume=.1,this.playlist=[i.ASSETS.PREPEND+"sounds/Blink.mp3",i.ASSETS.PREPEND+"sounds/getLucky.mp3",i.ASSETS.PREPEND+"sounds/trapqueen.mp3",i.ASSETS.PREPEND+"sounds/offspring.mp3"],this.audioElem=new Audio,this.audioElem.onended=function(){e.next()}}return e.prototype.toggle=function(e){e?this.audioElem.pause():(this.audioElem.volume=this.volume,this.audioElem.play())},e.prototype.next=function(){this.song++,this.song>=this.playlist.length&&(this.song=0),this.audioElem.pause(),this.audioElem.src=this.playlist[this.song],this.audioElem.volume=this.volume,this.audioElem.play()},e}();t.AudioService=n}),define("services/drones-manager.service",["require","exports","model/player.drones","services/key-status","model/enemy.drones","model/powerup.drones","model/missile","model/boss.drones","model/hud"],function(e,t,i,n,s,r,o,a,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){this.hud=new h.Hud,this.player=new i.Player,this.keyHandler=new n.KeyDown,this.powerUp=new r.Powerup,this.playerMissile=new o.Missile(!1),this.boss=new a.Boss,this.dT=0,this.pauseGame=!1,this.pauseGameTime=!0,this.playerRoF=0,this.playerBullets=[],this.enemyFleet=[],this.enemyBullets=[],this.GAME_DIFFICULTY=.04,this.GameOver=!1,this.KILLS=0}return e.prototype.keyChange=function(e,t){13===e&&this.pauseGameTime&&(this.timeout(),this.pauseGameTime=!1),this.keyHandler.keyChange(e,t)},e.prototype.update=function(e,t){this.dT=t,this.updateUserLocations(e),this.updateProjectileLocations(e),this.updateEnemiesLocation(e),this.randomizedGameElements(e),this.checkCollitions(e)},e.prototype.draw=function(e){var t=this;this.player.draw(e),this.powerUp.active&&this.powerUp.draw(e),this.powerUp.showText&&this.hud.displayText(e,this.powerUp.getFlashText()),(this.playerMissile.activeMissile||this.playerMissile.explodingMissile)&&this.playerMissile.draw(e),this.playerBullets.forEach(function(t){t.draw(e)}),this.enemyFleet.forEach(function(i){i.draw(e),i.hasBeenShot&&i.active&&t.hud.addCount(e,i)}),(this.boss.active||this.boss.explodingBoss)&&this.boss.draw(e),this.enemyBullets.forEach(function(t){t.draw(e)}),this.hud.playerStats(e,this.player,this.KILLS),this.hud.volumeHud(e)},e.prototype.updateUserLocations=function(e){this.player.update(e,this.keyHandler,this.dT)},e.prototype.updateProjectileLocations=function(e){var t=this;this.keyHandler.isShooting()&&(0===this.playerRoF&&(this.playerBullets=this.player.shoot(this.playerBullets)),this.player.hasRoFpowerUp?this.playerRoF=0:(this.playerRoF++,5===this.playerRoF&&(this.playerRoF=0))),this.playerBullets.forEach(function(i){i.update(e,null,t.dT),t.player.hasSprayPowerUp&&i.powerUpCycle()}),this.playerBullets=this.playerBullets.filter(function(e){return e.active}),this.enemyBullets=this.enemyBullets.filter(function(e){return e.active}),this.playerMissile.activeMissile||!this.keyHandler.isFireZeMissiles()||this.playerMissile.explodingMissile||(this.playerMissile.activeMissile=!0,this.playerMissile.X=this.player.X,this.playerMissile.Y=this.player.Y),this.playerMissile.activeMissile&&this.playerMissile.update(e,null,this.dT),this.powerUp.active&&this.powerUp.update(e,null,this.dT)},e.prototype.updateEnemiesLocation=function(e){var t=this;Math.random()<this.GAME_DIFFICULTY+.02&&this.enemyFleet.push(new s.Enemy(200,e.canvas.width-30,e.canvas.width/12+Math.random()*e.canvas.width/3)),this.enemyFleet.forEach(function(i){i.update(e,null,t.dT)}),this.enemyFleet=this.enemyFleet.filter(function(e){return e.active}),this.boss.active&&(this.boss.update(e,this.keyHandler,this.dT),Math.random()<this.GAME_DIFFICULTY&&(this.enemyBullets=this.boss.shoot(this.enemyBullets))),this.enemyBullets.forEach(function(i){i.update(e,null,t.dT),i.powerUpCycle()})},e.prototype.randomizedGameElements=function(e){this.powerUp.active||1e4*Math.random()<40&&(this.powerUp.active=!0,this.powerUp.X=e.canvas.width,this.powerUp.Y=this.getRandomHeight(e)),this.boss.active||this.KILLS%273==0&&(this.boss.active=!0,this.boss.health=500,this.boss.X=e.canvas.width-300,this.boss.Y=e.canvas.height/2)},e.prototype.checkCollitions=function(e){var t=this;this.enemyFleet.forEach(function(e){e.hasBeenShot||t.playerBullets.forEach(function(i){t.collides(e,i)&&(t.KILLS++,e.explode(),i.active=!1)})}),this.enemyFleet.forEach(function(i){i.hasBeenShot||(t.collides(i,t.player)&&(t.GameOver=t.player.explode(),i.explode(),t.removePowerups()),t.playerMissile.activeMissile&&t.collides(t.playerMissile,i)&&(t.KILLS++,i.explode(),t.playerMissile.destroy(e),t.enemyFleet.forEach(function(e){t.bombCollides(t.playerMissile,e,t.playerMissile.explosionVelocity)&&(t.KILLS++,e.explode())})))}),this.powerUp.active&&this.collides(this.player,this.powerUp)&&(this.powerUp.type===r.PowerUpType.Spray?this.player.hasSprayPowerUp=!0:this.powerUp.type===r.PowerUpType.Health?this.player.addHealth(10):this.powerUp.type===r.PowerUpType.explosionVelocity?(this.player.hasExplosionVelocity=!0,this.playerMissile.explosionVelocity=400):this.powerUp.type===r.PowerUpType.RoF&&(this.player.hasRoFpowerUp=!0),this.powerUp.flashInfo(this.powerUp.type),this.powerUp.active=!1,this.powerUp.X=e.canvas.width,this.powerUp.getNewType()),this.boss.active&&(this.playerBullets.forEach(function(e){t.collides(t.boss,e)&&(t.boss.health--,t.boss.health<=0&&(t.boss.active=!1),e.active=!1)}),this.playerMissile.activeMissile&&this.collides(this.playerMissile,this.boss)&&(this.boss.health-=this.player.hasExplosionVelocity?100:50,this.playerMissile.destroy(e),this.boss.health<=0&&this.boss.destroy(e),this.enemyFleet.forEach(function(e){t.bombCollides(t.playerMissile,e,t.playerMissile.explosionVelocity)&&(t.KILLS++,e.explode())}))),this.enemyBullets.forEach(function(e){t.collides(e,t.player)&&(e.active=!1,t.player.health--,t.removePowerups(),t.GameOver=t.player.explode())}),this.playerMissile.needMissile&&(this.playerMissile=new o.Missile(this.player.hasExplosionVelocity)),this.KILLS>100&&.07!==this.GAME_DIFFICULTY&&(this.GAME_DIFFICULTY=.07,this.hud.showLevelText="Level 2"),this.KILLS>500&&.13!==this.GAME_DIFFICULTY&&(this.GAME_DIFFICULTY=.13,this.hud.showLevelText="Level 3")},e.prototype.collides=function(e,t){return e.X<t.X+t.Width&&e.X+e.Width>t.X&&e.Y<t.Y+t.Height&&e.Y+e.Height>t.Y},e.prototype.bombCollides=function(e,t,i){return e.X<t.X+i+t.Width&&e.X+e.Width>t.X-i&&e.Y<t.Y+i+t.Width&&e.Y+e.Height>t.Y-i},e.prototype.timeout=function(){var e=this;setTimeout(function(){e.pauseGame=!e.pauseGame,e.pauseGameTime=!0,e.pauseGame||e.hud.clearGUI()},150)},e.prototype.getRandomHeight=function(e){var t=Math.floor(1e3*Math.random())+1;return t<10&&(t=10),t%2==0&&(t+=100),t>e.canvas.height&&(t-=t-e.canvas.height),t>e.canvas.height-50&&(t=e.canvas.height-100),t},e.prototype.removePowerups=function(){this.player.losePowerUps(),this.playerMissile.explosionVelocity=this.playerMissile.defaultExplosionVelocity},e}();t.DronesManagerService=l}),define("DronesCanvas",["require","exports","services/drones-manager.service","services/audio.service","model/CanvasMenuObjects","model/hud"],function(e,t,i,n,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.canvasElementName=e,this.lastTime=(new Date).getTime(),this.interval=1e3/30,this.audioPause=!1,this.canvasButtonList=[],this.loop=function(){t.gameLoop=window.requestAnimationFrame(t.loop);var e=(new Date).getTime();t.deltaTime=(e-t.lastTime)/1e3,t.gameManager.pauseGame||t.gameManager.GameOver?t.gameManager.pauseGame?t.buildCanvasGUI(r.SCREEN_ACTIONS.PAUSE):t.gameManager.GameOver&&t.buildCanvasGUI(r.SCREEN_ACTIONS.GAME_OVER):(t.CanvasObject.clearRect(0,0,t.CanvasObject.canvas.width,t.CanvasObject.canvas.height),t.gameManager.update(t.CanvasObject,t.deltaTime),t.gameManager.draw(t.CanvasObject)),t.lastTime=e-t.deltaTime%t.interval},this.CanvasObject=e.getContext("2d"),this.gameManager=new i.DronesManagerService,this.audioService=new n.AudioService}return e.prototype.init=function(){var e=this;window.document.body.style.backgroundColor="black";var t=this.getWindowSize();this.CanvasObject.canvas.width=t[0]-15,this.CanvasObject.canvas.height=t[1]-25,this.hud=this.gameManager.hud,this.buildCanvasGUI(r.SCREEN_ACTIONS.SPLASH),document.addEventListener("keydown",function(t){e.gameManager.keyChange(t.keyCode,!0)}),document.addEventListener("keyup",function(t){e.gameManager.keyChange(t.keyCode,!1)}),this.canvasElementName.addEventListener("click",function(t){e.runButtonChecks({x:t.clientX,y:t.clientY})})},e.prototype.start=function(){this.gameManager.GameOver=!1,this.audioService.next(),this.loop()},e.prototype.reset=function(){this.gameManager=null,this.gameLoop=null,this.gameManager=new i.DronesManagerService,this.audioService.next(),this.lastTime=(new Date).getTime(),this.deltaTime=0,this.interval=1e3/30,this.canvasButtonList=[],this.hud=this.gameManager.hud,this.loop()},e.prototype.getWindowSize=function(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),[e,t]},e.prototype.setDifficulty=function(e){switch(e){case 1:this.gameManager.GAME_DIFFICULTY=.04;break;case 2:this.gameManager.GAME_DIFFICULTY=.07;break;case 3:this.gameManager.GAME_DIFFICULTY=.13;break;default:this.gameManager.GAME_DIFFICULTY=.07}this.gameManager.playerRoF=0},e.prototype.buildCanvasGUI=function(e){switch(this.canvasButtonList=[],e){case r.SCREEN_ACTIONS.SPLASH:this.hud.splashScreen(this);break;case r.SCREEN_ACTIONS.PAUSE:this.hud.pauseScreen();break;case r.SCREEN_ACTIONS.GAME_OVER:this.hud.gameOverScreen()}this.canvasButtonList.push(new s.CanvasButton(s.CANVAS_BUTTON_NAME.AUDIO_PLAY,0,0,30,50)),this.canvasButtonList.push(new s.CanvasButton(s.CANVAS_BUTTON_NAME.NEXT,30,0,30,50))},e.prototype.runButtonChecks=function(e){var t=this;this.canvasButtonList.forEach(function(i){switch(i.name){case s.CANVAS_BUTTON_NAME.AUDIO_PLAY:i.isWithinBounds(e.x,e.y)&&(t.audioPause=!t.audioPause,t.audioService.toggle(t.audioPause),t.hud.pauseVolume(t.audioPause));break;case s.CANVAS_BUTTON_NAME.NEXT:i.isWithinBounds(e.x,e.y)&&t.audioService.next()}})},e}();t.DronesCanvas=o});